(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12954,        254]
NotebookOptionsPosition[     12565,        239]
NotebookOutlinePosition[     12999,        256]
CellTagsIndexPosition[     12956,        253]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Notebook", " ", "to", " ", "apply", " ", "the", " ", "method", " ", "to",
      " ", "the", " ", "new"}], ",", " ", 
    RowBox[{
     RowBox[{
     "processed", " ", "video", " ", "in", " ", "imageJ", " ", "or", " ", 
      "Mathematica", "\[IndentingNewLine]", "Stuck", " ", "to", " ", 
      "Mathematica", " ", "for", " ", "in"}], "-", 
     RowBox[{"situ", " ", "pre"}], "-", "processing"}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"ProcessImage", "[", "img_", "]"}], ":=", 
    RowBox[{"(", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"imgCropped", "=", 
       RowBox[{"ImageCrop", "[", 
        RowBox[{"img", ",", 
         RowBox[{"{", 
          RowBox[{"500", ",", "500"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"brightness", " ", "=", " ", 
       RowBox[{"Mean", "@", "imgCropped"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"imgContrast", " ", "=", " ", 
       RowBox[{"ImageAdjust", "[", 
        RowBox[{"imgCropped", ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"10", "*", 
            RowBox[{"brightness", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
           RowBox[{"0.4", "/", 
            RowBox[{"brightness", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}]}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"procImg", "=", 
       RowBox[{"DeleteSmallComponents", "[", 
        RowBox[{
         RowBox[{"FillingTransform", "[", 
          RowBox[{
           RowBox[{"Binarize", "[", 
            RowBox[{"imgContrast", ",", " ", 
             RowBox[{"{", 
              RowBox[{"0", ",", " ", "0.3"}], "}"}]}], "]"}], ",", " ", 
           RowBox[{"Padding", "->", "\"\<Fixed\>\""}]}], "]"}], ",", " ", 
         "300"}], "]"}]}], ";", 
      RowBox[{"centroids", "=", 
       RowBox[{
        RowBox[{"ComponentMeasurements", "[", 
         RowBox[{"procImg", ",", "\"\<Centroid\>\""}], "]"}], "/.", 
        "\[VeryThinSpace]", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"a_", "\[Rule]", "b_"}], ")"}], "\[Rule]", "b"}]}]}], ";", 
      RowBox[{"radii", "=", 
       RowBox[{
        RowBox[{"ComponentMeasurements", "[", 
         RowBox[{"procImg", ",", "\"\<EquivalentDiskRadius\>\""}], "]"}], "/.",
         "\[VeryThinSpace]", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"a_", "\[Rule]", "b_"}], ")"}], "\[Rule]", "b"}]}]}], ";", 
      RowBox[{"volumes", "=", 
       FractionBox[
        RowBox[{"4", " ", "\[Pi]", " ", 
         SuperscriptBox["radii", "3"]}], "3"]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Print", "[", 
        RowBox[{"HighlightImage", "[", 
         RowBox[{"imgContrast", ",", "centroids"}], "]"}], "]"}], 
       "\[IndentingNewLine]", 
       RowBox[{"Print", "[", 
        RowBox[{"HighlightImage", "[", 
         RowBox[{"procImg", ",", "centroids"}], "]"}], "]"}], 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
        "Remove", " ", "semicolon", " ", "for", " ", "debugging", " ", 
         "images"}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"Print", "[", 
        RowBox[{"centroids", ",", "radii", ",", "volumes"}], "]"}]}], ";"}], 
     "\[IndentingNewLine]", ")"}]}], "\n", 
   RowBox[{
    RowBox[{
    "SetDirectory", "[", 
     "\"\<C:\\\\Users\\\\Rares\\\\Desktop\\\\bubbles\\\\bubble_data\\\\Cordin \
1 Prentice set\\\\Data Analysis Project - URG\\\\Best of Close to Sub\\\\0.2v \
parallel config\\\\2006Aug2_083302\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"vidFrames", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"Import", "[", "#", "]"}], "&"}], "/@", 
      RowBox[{"FileNames", "[", "\"\<*.jpg\>\"", "]"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Replaced", " ", "the", " ", "video", " ", "converter", " ", "with", " ", 
     "image", " ", "reader", " ", "due", " ", "to", " ", "the", " ", "nature",
      " ", "of", " ", "the", " ", "data"}], "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"ProcessImage", "[", 
       RowBox[{"vidFrames", "[", 
        RowBox[{"[", "n", "]"}], "]"}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"n", ",", 
        RowBox[{"Length", "[", "vidFrames", "]"}]}], "}"}]}], "]"}], 
    ";"}]}]}]], "Input",
 CellChangeTimes->{{3.9074131984886875`*^9, 3.907413241726429*^9}, {
   3.9074132847558184`*^9, 3.907413314927899*^9}, {3.9074133935706367`*^9, 
   3.907413399800643*^9}, {3.9074134843952045`*^9, 3.907413581456498*^9}, {
   3.9074136258671513`*^9, 3.907413648099037*^9}, {3.9074136949698606`*^9, 
   3.907413717736988*^9}, {3.9074137947960663`*^9, 3.9074138264263105`*^9}, {
   3.907413857098752*^9, 3.9074138857607217`*^9}, {3.9075740348531003`*^9, 
   3.9075740643188257`*^9}, 3.907574126716095*^9, {3.9075741705891333`*^9, 
   3.907574224701109*^9}, 3.9075742797137966`*^9, {3.9075743739358635`*^9, 
   3.907574491252288*^9}, {3.9075745247723446`*^9, 3.907574553246358*^9}, {
   3.907574602702998*^9, 3.907574646742342*^9}, 3.9075746814164853`*^9, {
   3.907574724300024*^9, 3.9075747709162197`*^9}, 3.9075748260493293`*^9, 
   3.907574895812014*^9, 3.907574954691477*^9, {3.907574991371581*^9, 
   3.9075749919748955`*^9}, 3.9075750419044833`*^9, {3.9075751524349346`*^9, 
   3.907575294753344*^9}, {3.9075753832060766`*^9, 3.90757538364878*^9}, {
   3.90757542304589*^9, 3.9075754262673635`*^9}, {3.907575469359303*^9, 
   3.9075755216835203`*^9}, {3.907575576481868*^9, 3.907575631097623*^9}, {
   3.907575682261983*^9, 3.9075756824194984`*^9}, {3.907575721729166*^9, 
   3.907575800026063*^9}, {3.907575833417369*^9, 3.907575907345262*^9}, {
   3.9075759470293765`*^9, 3.9075759472689686`*^9}, {3.9075759780307965`*^9, 
   3.9075759982286367`*^9}, 3.9075760405551643`*^9, {3.907576085571204*^9, 
   3.9075760856382446`*^9}, 3.9075761218556213`*^9, {3.9075761822450852`*^9, 
   3.907576223904477*^9}, {3.9075762946712084`*^9, 3.9075763035159006`*^9}, {
   3.907576339897353*^9, 3.907576355658993*^9}, {3.907576407781191*^9, 
   3.9075764078332233`*^9}, {3.9075764439992085`*^9, 3.907576444482623*^9}, {
   3.9075764803395424`*^9, 3.9075765230152864`*^9}, {3.90757657979477*^9, 
   3.9075766923097544`*^9}, {3.907576738325513*^9, 3.907576808054802*^9}, {
   3.907576857572566*^9, 3.907576983627021*^9}, {3.907577296067037*^9, 
   3.907577296320377*^9}, {3.907577333719165*^9, 3.9075773504868608`*^9}, 
   3.907577382393651*^9, {3.9075774124694743`*^9, 3.9075774126860266`*^9}, {
   3.9075774660823364`*^9, 3.9075775531077833`*^9}, {3.907577606000854*^9, 
   3.907577616622075*^9}, {3.907577697312275*^9, 3.907577712106052*^9}, {
   3.9075777488138695`*^9, 3.907577774073419*^9}, {3.907578512720272*^9, 
   3.907578512929346*^9}, {3.9075785547330227`*^9, 3.907578554992155*^9}, 
   3.9075785905987034`*^9, {3.907578620860553*^9, 3.9075786457545033`*^9}, {
   3.907578726266798*^9, 3.9075788188096733`*^9}, {3.907578857777807*^9, 
   3.907578857872323*^9}, {3.907578897306881*^9, 3.9075789038400187`*^9}, {
   3.9075789364335165`*^9, 3.9075789371891127`*^9}, {3.9075789823528943`*^9, 
   3.907578991545586*^9}, {3.907579023293131*^9, 3.907579023825138*^9}, 
   3.907579067958898*^9, {3.9075791081261983`*^9, 3.9075791355178747`*^9}, {
   3.907579170503269*^9, 3.907579170712418*^9}, {3.9075792127690496`*^9, 
   3.907579213307807*^9}, {3.9075792905732527`*^9, 3.907579302071768*^9}, {
   3.907579341724492*^9, 3.9075793418695765`*^9}, {3.907579386813048*^9, 
   3.9075793871071978`*^9}, {3.9075794273277597`*^9, 3.907579432893506*^9}, {
   3.907579502618325*^9, 3.9075795031878047`*^9}, {3.90757954452734*^9, 
   3.907579544736459*^9}, {3.907579603328829*^9, 3.907579607067122*^9}, {
   3.907579654710758*^9, 3.9075796549318275`*^9}, {3.90757969770368*^9, 
   3.907579720725382*^9}, {3.9075797564848638`*^9, 3.907579780906924*^9}, {
   3.907579848490616*^9, 3.9075800638856926`*^9}, {3.90758009596953*^9, 
   3.907580096076047*^9}, {3.907580128313259*^9, 3.9075801438964944`*^9}, {
   3.907580176731243*^9, 3.907580203684147*^9}, 3.907580239487006*^9, {
   3.9075802862881403`*^9, 3.907580323131191*^9}, {3.9075804386366596`*^9, 
   3.9075804555034084`*^9}, {3.907580546943892*^9, 3.9075805488330708`*^9}, {
   3.907580588570323*^9, 3.907580590069376*^9}, {3.9075806340539403`*^9, 
   3.9075806353586335`*^9}, {3.907580672554909*^9, 3.907580672659032*^9}, {
   3.907580819854641*^9, 3.9075808595200853`*^9}, {3.9075809180358477`*^9, 
   3.9075809625953445`*^9}, {3.9075810175650597`*^9, 
   3.9075810421061835`*^9}, {3.9075810887931166`*^9, 3.907581130752596*^9}, {
   3.907581250171667*^9, 3.907581296140238*^9}, 3.9075813466509914`*^9, {
   3.9075814398063164`*^9, 3.9075815119293737`*^9}, {3.9075815680783005`*^9, 
   3.9075815693266706`*^9}, {3.907581636872755*^9, 3.90758163785756*^9}, {
   3.9075816869547186`*^9, 3.9075817306173553`*^9}, {3.9075817689209313`*^9, 
   3.9075817707846127`*^9}, {3.9075819522062626`*^9, 
   3.9075819910720205`*^9}, {3.9075820402712774`*^9, 
   3.9075820404013023`*^9}, {3.9075820709020996`*^9, 
   3.9075821278305683`*^9}, {3.9075823044189267`*^9, 3.907582304544957*^9}, {
   3.907582336503087*^9, 3.907582418972823*^9}, {3.907582457392782*^9, 
   3.9075824583127017`*^9}, {3.907582503247155*^9, 3.9075825033536687`*^9}, {
   3.9075825350369043`*^9, 3.907582562428582*^9}, {3.907582593545504*^9, 
   3.9075826264119034`*^9}, {3.9075826688445272`*^9, 3.907582699249439*^9}, {
   3.907582730328518*^9, 3.9075827555776005`*^9}, {3.9075827913622103`*^9, 
   3.907582854610325*^9}, {3.907582904238996*^9, 3.9075829062940536`*^9}, {
   3.9075830002689943`*^9, 3.9075830131694365`*^9}, {3.90758307478765*^9, 
   3.9075831429620647`*^9}, {3.9075832820473766`*^9, 
   3.9075832896093345`*^9}, {3.9075833249153194`*^9, 3.907583331794701*^9}, {
   3.907583370664273*^9, 3.907583376386459*^9}, {3.90758345646611*^9, 
   3.9075834658269925`*^9}, {3.9075835246266365`*^9, 
   3.9075835457465076`*^9}, {3.907583580080289*^9, 3.9075836086126614`*^9}, {
   3.907583641083576*^9, 3.9075836416812973`*^9}, {3.9075836744109893`*^9, 
   3.90758367459307*^9}, 3.907583706514326*^9, {3.9075837772719865`*^9, 
   3.9075837968013206`*^9}, {3.907583886964901*^9, 3.907583888171406*^9}, 
   3.9075839397497253`*^9, 3.907583983566903*^9, 3.907584029915536*^9, {
   3.9075841427026806`*^9, 3.9075841785051975`*^9}, {3.907584232368442*^9, 
   3.9075843220833454`*^9}, {3.9075843943982034`*^9, 3.907584396966093*^9}, {
   3.907584436772464*^9, 3.907584460816122*^9}, {3.9075845022824917`*^9, 
   3.907584503761044*^9}, {3.907584546619789*^9, 3.9075845760297947`*^9}, 
   3.907584622308274*^9, {3.9075846585827417`*^9, 3.907584659640267*^9}, {
   3.907584694110054*^9, 3.90758470729526*^9}, {3.907584884008932*^9, 
   3.9075849262170324`*^9}, {3.907585038518736*^9, 3.9075850409183636`*^9}, {
   3.907585348794309*^9, 3.907585411260168*^9}, {3.9075854423776207`*^9, 
   3.9075854678296576`*^9}, {3.907585507910473*^9, 3.907585511196725*^9}, {
   3.9075855461047134`*^9, 3.9075855493264227`*^9}, {3.9075855857645755`*^9, 
   3.9075855883267307`*^9}, {3.9075856417577477`*^9, 
   3.9075856714381323`*^9}, {3.9075857129277296`*^9, 
   3.9075857374187937`*^9}, {3.9075857761243677`*^9, 
   3.9075857777193413`*^9}, {3.907585820855335*^9, 3.9075858222497835`*^9}, {
   3.9075858550690765`*^9, 3.907585856916218*^9}, {3.9075859142901974`*^9, 
   3.907585914620258*^9}, {3.907585945853238*^9, 3.907585947577463*^9}, {
   3.907585979657405*^9, 3.9075859812778263`*^9}, {3.907586013667592*^9, 
   3.9075860211680684`*^9}, {3.9076607699133883`*^9, 3.907660779528232*^9}, {
   3.9076610255243196`*^9, 3.907661031476223*^9}, {3.9089828288444757`*^9, 
   3.908982833795638*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"662c2d8f-af5b-4f16-a8de-f06f2bd521cc"]
},
WindowSize->{569.25, 624.75},
WindowMargins->{{429, Automatic}, {42, Automatic}},
Magnification:>1. Inherited,
FrontEndVersion->"13.3 for Microsoft Windows (64-bit) (July 24, 2023)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"8c8cacd9-7fe7-48c1-971e-67e73ffebacf"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 12003, 217, 728, "Input",ExpressionUUID->"662c2d8f-af5b-4f16-a8de-f06f2bd521cc"]
}
]
*)

